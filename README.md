# Why-3 Library Manager

The `why3find` utility is dedicated to the management of interoperable Why-3
libraries.

## Usage

The `why3find` command can be used as a convenient wrapper for the usual `why3` command.
Simply type `why3find` or `why3find -h` to list all commands, and `why3find <cmd> -h`
for detailed instructions of command `<cmd>`.

## Why-3 Packages

From `why3find` point of view, a why3 package is a collection of why3 source
files, configuration files and drivers that are installed at predefined site(s).

Packages are meant to have dependencies, ie. package `A` might depend on
why3 source files from package `B`, recursively. Hence, `why3find` knowns how to
generate suitable options for `why3` to be able to find all the necessary sources.

You may also extract OCaml files from your Why-3 files and make them available as
regular `opam` or `ocamlfind` OCaml packages.

## Package Development

To ease the development process of Why-3 packages, convenient resources are
available from `why3find` to generate template files for `dune` and `make`.

The recommended setup for a new Why-3 package `PKG` is as follows:

1. First, run `why3find init PKG [DIR]` ; this will creates templates for
   `Makefile`, `.gitignore` and `dune-project` that you can starts with.

2. Place your Why-3 source files in `DIR/PKG/**/*.mlw` directory ; this is
   necessary to avoid name clashes from different packages.

3. Now, run `why3find makefile -h` and follow instructions.

A typical Why-3 package project will be structured as follows:

```
+ DIR/Makefile       This is where you setup your development options
+ DIR/dune-project   This is where you setup your deployment options
+ DIR/dune           This file is generated by make build
+ DIR/META.json      This file is generated by make build
+ DIR/PKG/**/*.mlw   This is where your Why-3 source files live
+ DIR/lib/dune       This file is generated by make build for OCaml extraction
+ DIR/lib/*.ml       The extracted OCaml source files
```

The most useful command you want to use for conducting your proofs is `make
fix`.  This command tries to prove all your Why-3 source files with the hammer
and, in case of failure, it opens Why-3 IDE.

## Package Installation

To install your Why-3 package and its associated extracted OCaml package,
proceed as follows:

1. First, run `make build` to update dune files and rebuild everything.
2. Second, run `make install` ; this will install both the Why-3 and OCaml packages.
